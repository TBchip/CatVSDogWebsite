{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\code\\\\Web\\\\react-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\code\\\\Web\\\\react-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:\\\\code\\\\Web\\\\react-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\code\\\\Web\\\\react-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"D:\\\\code\\\\Web\\\\react-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"D:\\\\code\\\\Web\\\\react-tutorial\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Cat from'./Cat';import Dog from'./Dog';import'./styles.css';import VoteCount from'./VoteCount';var self;var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={catPictureURL:[],dogPictureURL:[],catVotes:0,dogVotes:0};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:self=this;self.loadNewPictures();_context.t0=self;_context.next=5;return this.getVotes(\"cat\");case 5:_context.t1=_context.sent;_context.next=8;return this.getVotes(\"dog\");case 8:_context.t2=_context.sent;_context.t3={catVotes:_context.t1,dogVotes:_context.t2};_context.t0.setState.call(_context.t0,_context.t3);case 11:case\"end\":return _context.stop();}}},_callee,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"loadNewPictures\",value:function(){var _loadNewPictures=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var catURL,dogURL,found;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('https://aws.random.cat/meow').then(function(res){return res.json();}).then(function(json){catURL=json.file;});case 2:found=false;case 3:if(found){_context2.next=8;break;}_context2.next=6;return fetch('https://random.dog/woof.json').then(function(res){return res.json();}).then(function(json){var imgType=json.url.substring(json.url.length-4,json.url.length).toLowerCase();if(imgType===\".jpg\"||imgType===\".png\"){found=true;dogURL=json.url;}});case 6:_context2.next=3;break;case 8:self.setState({catPictureURL:catURL,dogPictureURL:dogURL});case 9:case\"end\":return _context2.stop();}}},_callee2);}));function loadNewPictures(){return _loadNewPictures.apply(this,arguments);}return loadNewPictures;}()},{key:\"getVotes\",value:function(){var _getVotes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(name){var score,getURL;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:getURL=\"http://dreamlo.com/lb/5ec2880d0cf2aa0c28423922/json\";_context3.next=3;return fetch(getURL).then(function(res){return res.json();}).then(function(json){if(json.dreamlo.leaderboard==null){self.setVotes(name,0);score=0;}else{var entries=json.dreamlo.leaderboard.entry;entries=entries.filter(function(value){if(value.name==name)return true;else return false;});score=Number(entries[0].score);}});case 3:return _context3.abrupt(\"return\",score);case 4:case\"end\":return _context3.stop();}}},_callee3);}));function getVotes(_x){return _getVotes.apply(this,arguments);}return getVotes;}()},{key:\"setVotes\",value:function setVotes(name,score){var setURL=\"http://dreamlo.com/lb/rB0P6BG4_0y6ODkGEkwiBQyiBo5yCdykaB3uR9hY74_g/add/\"+name+\"/\"+score;fetch(setURL);}},{key:\"updateVotes\",value:function(){var _updateVotes=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var catScore,dogScore;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return self.getVotes(\"cat\");case 2:catScore=_context4.sent;_context4.next=5;return self.getVotes(\"dog\");case 5:dogScore=_context4.sent;self.setState({catVotes:catScore,dogVotes:dogScore});case 7:case\"end\":return _context4.stop();}}},_callee4);}));function updateVotes(){return _updateVotes.apply(this,arguments);}return updateVotes;}()},{key:\"addVoteCat\",value:function(){var _addVoteCat=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){var score;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return self.getVotes(\"cat\");case 2:score=_context5.sent;score++;self.setVotes(\"cat\",score);self.updateVotes();self.loadNewPictures();case 7:case\"end\":return _context5.stop();}}},_callee5);}));function addVoteCat(){return _addVoteCat.apply(this,arguments);}return addVoteCat;}()},{key:\"addVoteDog\",value:function(){var _addVoteDog=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var score;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return self.getVotes(\"dog\");case 2:score=_context6.sent;score++;self.setVotes(\"dog\",score);self.updateVotes();self.loadNewPictures();case 7:case\"end\":return _context6.stop();}}},_callee6);}));function addVoteDog(){return _addVoteDog.apply(this,arguments);}return addVoteDog;}()},{key:\"render\",value:function render(){var _this$state=this.state,catPictureURL=_this$state.catPictureURL,dogPictureURL=_this$state.dogPictureURL,catVotes=_this$state.catVotes,dogVotes=_this$state.dogVotes;return/*#__PURE__*/React.createElement(\"div\",{className:\"background\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pictures\"},/*#__PURE__*/React.createElement(Cat,{picture:catPictureURL}),/*#__PURE__*/React.createElement(Dog,{picture:dogPictureURL})),/*#__PURE__*/React.createElement(\"div\",{className:\"voteBtns\"},/*#__PURE__*/React.createElement(\"button\",{className:\"voteBtn\",onClick:this.addVoteCat},\"cat\"),/*#__PURE__*/React.createElement(\"button\",{className:\"voteBtn\",onClick:this.addVoteDog},\"dog\")),/*#__PURE__*/React.createElement(\"div\",{className:\"voteCounts\"},/*#__PURE__*/React.createElement(VoteCount,{votes:catVotes}),/*#__PURE__*/React.createElement(VoteCount,{votes:dogVotes})));}}]);return App;}(Component);export default App;","map":{"version":3,"sources":["D:/code/Web/react-tutorial/src/App.js"],"names":["React","Component","Cat","Dog","VoteCount","self","App","props","state","catPictureURL","dogPictureURL","catVotes","dogVotes","loadNewPictures","getVotes","setState","fetch","then","res","json","catURL","file","found","imgType","url","substring","length","toLowerCase","dogURL","name","getURL","dreamlo","leaderboard","setVotes","score","entries","entry","filter","value","Number","setURL","catScore","dogScore","updateVotes","addVoteCat","addVoteDog"],"mappings":"m4BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CACA,MAAOC,CAAAA,GAAP,KAAgB,OAAhB,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CAEA,GAAIC,CAAAA,IAAJ,C,GAEMC,CAAAA,G,0FAEL,aAAYC,KAAZ,CAAmB,qCAClB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACZC,aAAa,CAAE,EADH,CAEZC,aAAa,CAAE,EAFH,CAGZC,QAAQ,CAAE,CAHE,CAIZC,QAAQ,CAAE,CAJE,CAAb,CAFkB,aAQlB,C,8QAGAP,IAAI,CAAG,IAAP,CACAA,IAAI,CAACQ,eAAL,G,YACAR,I,uBACiB,MAAKS,QAAL,CAAc,KAAd,C,wDACA,MAAKA,QAAL,CAAc,KAAd,C,+CADhBH,Q,aACAC,Q,0BAFIG,Q,sfASCC,CAAAA,KAAK,CAAC,6BAAD,CAAL,CACJC,IADI,CACC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADJ,EAEJF,IAFI,CAEC,SAAAE,IAAI,CAAI,CACbC,MAAM,CAAGD,IAAI,CAACE,IAAd,CACA,CAJI,C,QAMFC,K,CAAQ,K,WACJA,K,iDACDN,CAAAA,KAAK,CAAC,8BAAD,CAAL,CACJC,IADI,CACC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADJ,EAEJF,IAFI,CAEC,SAAAE,IAAI,CAAI,CACb,GAAII,CAAAA,OAAO,CAAGJ,IAAI,CAACK,GAAL,CAASC,SAAT,CAAmBN,IAAI,CAACK,GAAL,CAASE,MAAT,CAAkB,CAArC,CAAwCP,IAAI,CAACK,GAAL,CAASE,MAAjD,EAAyDC,WAAzD,EAAd,CACA,GAAIJ,OAAO,GAAK,MAAZ,EAAsBA,OAAO,GAAK,MAAtC,CAA8C,CAC7CD,KAAK,CAAG,IAAR,CACAM,MAAM,CAAGT,IAAI,CAACK,GAAd,CACA,CACD,CARI,C,sCAWPnB,IAAI,CAACU,QAAL,CAAc,CACbN,aAAa,CAAEW,MADF,CAEbV,aAAa,CAAEkB,MAFF,CAAd,E,0RAMcC,I,uIAEVC,M,CAAS,qD,wBACPd,CAAAA,KAAK,CAACc,MAAD,CAAL,CACJb,IADI,CACC,SAAAC,GAAG,QAAIA,CAAAA,GAAG,CAACC,IAAJ,EAAJ,EADJ,EAEJF,IAFI,CAEC,SAAAE,IAAI,CAAI,CACb,GAAIA,IAAI,CAACY,OAAL,CAAaC,WAAb,EAA4B,IAAhC,CAAsC,CACrC3B,IAAI,CAAC4B,QAAL,CAAcJ,IAAd,CAAoB,CAApB,EACAK,KAAK,CAAG,CAAR,CACA,CAHD,IAGO,CACN,GAAIC,CAAAA,OAAO,CAAGhB,IAAI,CAACY,OAAL,CAAaC,WAAb,CAAyBI,KAAvC,CACAD,OAAO,CAAGA,OAAO,CAACE,MAAR,CAAe,SAACC,KAAD,CAAW,CACnC,GAAIA,KAAK,CAACT,IAAN,EAAcA,IAAlB,CAAwB,MAAO,KAAP,CAAxB,IACK,OAAO,MAAP,CACL,CAHS,CAAV,CAIAK,KAAK,CAAGK,MAAM,CAACJ,OAAO,CAAC,CAAD,CAAP,CAAWD,KAAZ,CAAd,CACA,CACD,CAdI,C,yCAgBCA,K,wLAECL,I,CAAMK,K,CAAO,CACrB,GAAIM,CAAAA,MAAM,CAAG,0EACZX,IADY,CACL,GADK,CACCK,KADd,CAEAlB,KAAK,CAACwB,MAAD,CAAL,CACA,C,oSAEqBnC,CAAAA,IAAI,CAACS,QAAL,CAAc,KAAd,C,QAAjB2B,Q,uCACiBpC,CAAAA,IAAI,CAACS,QAAL,CAAc,KAAd,C,QAAjB4B,Q,gBACJrC,IAAI,CAACU,QAAL,CAAc,CACbJ,QAAQ,CAAE8B,QADG,CAEb7B,QAAQ,CAAE8B,QAFG,CAAd,E,yaAOkBrC,CAAAA,IAAI,CAACS,QAAL,CAAc,KAAd,C,QAAdoB,K,gBACJA,KAAK,GACL7B,IAAI,CAAC4B,QAAL,CAAc,KAAd,CAAqBC,KAArB,EAEA7B,IAAI,CAACsC,WAAL,GACAtC,IAAI,CAACQ,eAAL,G,saAGkBR,CAAAA,IAAI,CAACS,QAAL,CAAc,KAAd,C,QAAdoB,K,gBACJA,KAAK,GACL7B,IAAI,CAAC4B,QAAL,CAAc,KAAd,CAAqBC,KAArB,EAEA7B,IAAI,CAACsC,WAAL,GACAtC,IAAI,CAACQ,eAAL,G,uLAIQ,iBACmD,KAAKL,KADxD,CACFC,aADE,aACFA,aADE,CACaC,aADb,aACaA,aADb,CAC4BC,QAD5B,aAC4BA,QAD5B,CACsCC,QADtC,aACsCA,QADtC,CAGR,mBACC,2BAAK,SAAS,CAAE,YAAhB,eACC,2BAAK,SAAS,CAAE,UAAhB,eACC,oBAAC,GAAD,EAAK,OAAO,CAAEH,aAAd,EADD,cAEC,oBAAC,GAAD,EAAK,OAAO,CAAEC,aAAd,EAFD,CADD,cAKC,2BAAK,SAAS,CAAE,UAAhB,eACC,8BAAQ,SAAS,CAAE,SAAnB,CAA8B,OAAO,CAAE,KAAKkC,UAA5C,QADD,cAEC,8BAAQ,SAAS,CAAE,SAAnB,CAA8B,OAAO,CAAE,KAAKC,UAA5C,QAFD,CALD,cASC,2BAAK,SAAS,CAAE,YAAhB,eACC,oBAAC,SAAD,EAAW,KAAK,CAAElC,QAAlB,EADD,cAEC,oBAAC,SAAD,EAAW,KAAK,CAAEC,QAAlB,EAFD,CATD,CADD,CAgBA,C,iBAzHgBX,S,EA6HlB,cAAeK,CAAAA,GAAf","sourcesContent":["import React, { Component } from 'react';\nimport Cat from './Cat';\nimport Dog from './Dog';\nimport './styles.css';\nimport VoteCount from './VoteCount';\n\nvar self;\n\nclass App extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tcatPictureURL: [],\n\t\t\tdogPictureURL: [],\n\t\t\tcatVotes: 0,\n\t\t\tdogVotes: 0,\n\t\t};\n\t}\n\n\tasync componentDidMount() {\n\t\tself = this;\n\t\tself.loadNewPictures();\n\t\tself.setState({\n\t\t\tcatVotes: await this.getVotes(\"cat\"),\n\t\t\tdogVotes: await this.getVotes(\"dog\"),\n\t\t})\n\t}\n\n\tasync loadNewPictures() {\n\t\tlet catURL, dogURL;\n\n\t\tawait fetch('https://aws.random.cat/meow')\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => {\n\t\t\t\tcatURL = json.file;\n\t\t\t});\n\n\t\tvar found = false;\n\t\twhile (!found) {\n\t\t\tawait fetch('https://random.dog/woof.json')\n\t\t\t\t.then(res => res.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tvar imgType = json.url.substring(json.url.length - 4, json.url.length).toLowerCase();\n\t\t\t\t\tif (imgType === \".jpg\" || imgType === \".png\") {\n\t\t\t\t\t\tfound = true;\n\t\t\t\t\t\tdogURL = json.url;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\n\t\tself.setState({\n\t\t\tcatPictureURL: catURL,\n\t\t\tdogPictureURL: dogURL,\n\t\t});\n\t}\n\n\tasync getVotes(name) {\n\t\tlet score;\n\t\tlet getURL = \"http://dreamlo.com/lb/5ec2880d0cf2aa0c28423922/json\"\n\t\tawait fetch(getURL)\n\t\t\t.then(res => res.json())\n\t\t\t.then(json => {\n\t\t\t\tif (json.dreamlo.leaderboard == null) {\n\t\t\t\t\tself.setVotes(name, 0);\n\t\t\t\t\tscore = 0;\n\t\t\t\t} else {\n\t\t\t\t\tlet entries = json.dreamlo.leaderboard.entry;\n\t\t\t\t\tentries = entries.filter((value) => {\n\t\t\t\t\t\tif (value.name == name) return true\n\t\t\t\t\t\telse return false\n\t\t\t\t\t});\n\t\t\t\t\tscore = Number(entries[0].score);\n\t\t\t\t}\n\t\t\t});\n\n\t\treturn score;\n\t}\n\tsetVotes(name, score) {\n\t\tlet setURL = \"http://dreamlo.com/lb/rB0P6BG4_0y6ODkGEkwiBQyiBo5yCdykaB3uR9hY74_g/add/\" +\n\t\t\tname + \"/\" + score;\n\t\tfetch(setURL)\n\t}\n\tasync updateVotes() {\n\t\tlet catScore = await self.getVotes(\"cat\");\n\t\tlet dogScore = await self.getVotes(\"dog\");\n\t\tself.setState({\n\t\t\tcatVotes: catScore,\n\t\t\tdogVotes: dogScore,\n\t\t});\n\t}\n\n\tasync addVoteCat() {\n\t\tlet score = await self.getVotes(\"cat\");\n\t\tscore++;\n\t\tself.setVotes(\"cat\", score);\n\n\t\tself.updateVotes();\n\t\tself.loadNewPictures();\n\t}\n\tasync addVoteDog() {\n\t\tlet score = await self.getVotes(\"dog\");\n\t\tscore++;\n\t\tself.setVotes(\"dog\", score);\n\n\t\tself.updateVotes();\n\t\tself.loadNewPictures();\n\t}\n\n\n\trender() {\n\t\tvar { catPictureURL, dogPictureURL, catVotes, dogVotes } = this.state;\n\n\t\treturn (\n\t\t\t<div className={\"background\"}>\n\t\t\t\t<div className={\"pictures\"}>\n\t\t\t\t\t<Cat picture={catPictureURL} />\n\t\t\t\t\t<Dog picture={dogPictureURL} />\n\t\t\t\t</div>\n\t\t\t\t<div className={\"voteBtns\"}>\n\t\t\t\t\t<button className={\"voteBtn\"} onClick={this.addVoteCat}>cat</button>\n\t\t\t\t\t<button className={\"voteBtn\"} onClick={this.addVoteDog}>dog</button>\n\t\t\t\t</div>\n\t\t\t\t<div className={\"voteCounts\"}>\n\t\t\t\t\t<VoteCount votes={catVotes} />\n\t\t\t\t\t<VoteCount votes={dogVotes} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}